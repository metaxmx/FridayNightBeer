<div ng-controller="ForumsCtrl" class="view-listforums">

	<div class="view-header" ng-show="forumsStatus.successful">
		<div class="breadcrumb-combined">
			<ol class="breadcrumb">
				<li><a ng-href="/#/forum" site-title>Friday Night Beer</a></li>
				<li class="active">Forum</li>
			</ol>
			<ul class="headeroptions">
				<li ng-if="checkPermission('foo')">
					<span class="glyphicon glyphicon-search"></span>
					<a href="/">Suche</a>
				</li>
				<li ng-if="checkPermission('Admin')">
					<span class="glyphicon glyphicon-wrench"></span>
					<a ng-href="/#/admin/forum/configure">Foren verwalten</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="main-content" ng-show="forumsStatus.successful">
		<div ng-repeat="category in categories" class="listforums-category">
			<h2>{{category.name}}</h2>
			<table st-table="category.forums" class="forums">
				<thead>
				<tr>
					<th class="forum-icon-col"></th>
					<th class="forum-title-col">Forum</th>
					<th class="forum-content-col">Inhalt</th>
					<th class="forum-latestpost-col">Letzter Beitrag</th>
				</tr>
				</thead>
				<tbody>
				<tr ng-repeat="forum in category.forums">
					<td class="forum-icon-col"><img src="/assets/images/modern/forum_default.png"></td>
					<td class="forum-title-col">
						<a ng-href="/#/forum/{{forum.id}}">{{forum.name}}</a>
						<div>{{forum.description}}</div>
					</td>
					<td class="forum-content-col">
						<div>{{forum.numThreads}} Threads</div>
						<div>{{forum.numPosts}} Posts</div>
					</td>
					<td class="forum-latestpost-col">
						<div ng-show="forum.lastPost">
							<div><a ng-href="/#/topic/{{forum.lastPost.id}}">{{forum.lastPost.title}}</a></div>
							<div>
								von <a href="{{forum.lastPost.user}}">{{forum.lastPost.userName}}</a>
								am {{forum.lastPost.date | date:'dd.MM.yyyy HH:mm'}}
							</div>
						</div>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="loading-spinner" ng-show="forumsStatus.loading"></div>
	<alert type="danger" ng-show="forumsStatus.error">{{forumsStatus.errormessage}}</alert>
</div>